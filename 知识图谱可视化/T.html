<!DOCTYPE html>  
<html>
<head>  
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />  
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
<title>Hello, World</title>  
<style type="text/css">  
html{height:100%}  
body{height:100%;margin:0px;padding:0px}  
#container{height:100%}  
</style>  
<script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=o1IqGqP5IvLCoD7crFLHZBgLK1dZAzpc">
//v3.0版本的引用方式：src="http://api.map.baidu.com/api?v=3.0&ak=您的密钥"
</script>
</head>  
 
<body>  
<div id="container"></div> 
<script type="text/javascript"> 
var map = new BMap.Map("container");
// 创建地图实例  
var point = new BMap.Point(116.404, 39.915);
// 创建点坐标  
map.enableScrollWheelZoom(true);
map.centerAndZoom(point, 15);
// 初始化地图，设置中心点坐标和地图级别 

var pStart = new BMap.Point(116.17,39.69);
var pEnd = new BMap.Point(116.67,40.19);
var rectangles=new Array([2500]);
for ( var i = 0; i <2500; i++)
	rectangles[i]=new Array([2500]);

var t1=new Array();
var t2=new Array();

t1[ 0 ]= 926 ; t2[ 0 ]= 927 ;
t1[ 1 ]= 1018 ; t2[ 1 ]= 1068 ;
t1[ 2 ]= 1019 ; t2[ 2 ]= 1020 ;
t1[ 3 ]= 1020 ; t2[ 3 ]= 1070 ;
t1[ 4 ]= 1021 ; t2[ 4 ]= 1022 ;
t1[ 5 ]= 1029 ; t2[ 5 ]= 1079 ;
t1[ 6 ]= 1064 ; t2[ 6 ]= 1065 ;
t1[ 7 ]= 1065 ; t2[ 7 ]= 1066 ;
t1[ 8 ]= 1065 ; t2[ 8 ]= 1115 ;
t1[ 9 ]= 1074 ; t2[ 9 ]= 1075 ;
t1[ 10 ]= 1075 ; t2[ 10 ]= 1076 ;
t1[ 11 ]= 1075 ; t2[ 11 ]= 1125 ;
t1[ 12 ]= 1076 ; t2[ 12 ]= 1077 ;
t1[ 13 ]= 1077 ; t2[ 13 ]= 1127 ;
t1[ 14 ]= 1079 ; t2[ 14 ]= 1080 ;
t1[ 15 ]= 1079 ; t2[ 15 ]= 1129 ;
t1[ 16 ]= 1081 ; t2[ 16 ]= 1131 ;
t1[ 17 ]= 1115 ; t2[ 17 ]= 1116 ;
t1[ 18 ]= 1119 ; t2[ 18 ]= 1169 ;
t1[ 19 ]= 1120 ; t2[ 19 ]= 1170 ;
t1[ 20 ]= 1124 ; t2[ 20 ]= 1125 ;
t1[ 21 ]= 1125 ; t2[ 21 ]= 1126 ;
t1[ 22 ]= 1125 ; t2[ 22 ]= 1175 ;
t1[ 23 ]= 1126 ; t2[ 23 ]= 1127 ;
t1[ 24 ]= 1126 ; t2[ 24 ]= 1176 ;
t1[ 25 ]= 1128 ; t2[ 25 ]= 1129 ;
t1[ 26 ]= 1129 ; t2[ 26 ]= 1130 ;
t1[ 27 ]= 1129 ; t2[ 27 ]= 1179 ;
t1[ 28 ]= 1130 ; t2[ 28 ]= 1131 ;
t1[ 29 ]= 1131 ; t2[ 29 ]= 1181 ;
t1[ 30 ]= 1167 ; t2[ 30 ]= 1168 ;
t1[ 31 ]= 1168 ; t2[ 31 ]= 1169 ;
t1[ 32 ]= 1169 ; t2[ 32 ]= 1170 ;
t1[ 33 ]= 1169 ; t2[ 33 ]= 1219 ;
t1[ 34 ]= 1175 ; t2[ 34 ]= 1225 ;
t1[ 35 ]= 1176 ; t2[ 35 ]= 1226 ;
t1[ 36 ]= 1178 ; t2[ 36 ]= 1228 ;
t1[ 37 ]= 1179 ; t2[ 37 ]= 1180 ;
t1[ 38 ]= 1179 ; t2[ 38 ]= 1229 ;
t1[ 39 ]= 1182 ; t2[ 39 ]= 1183 ;
t1[ 40 ]= 1218 ; t2[ 40 ]= 1268 ;
t1[ 41 ]= 1225 ; t2[ 41 ]= 1226 ;
t1[ 42 ]= 1225 ; t2[ 42 ]= 1275 ;
t1[ 43 ]= 1226 ; t2[ 43 ]= 1227 ;
t1[ 44 ]= 1226 ; t2[ 44 ]= 1276 ;
t1[ 45 ]= 1227 ; t2[ 45 ]= 1228 ;
t1[ 46 ]= 1227 ; t2[ 46 ]= 1277 ;
t1[ 47 ]= 1228 ; t2[ 47 ]= 1229 ;
t1[ 48 ]= 1228 ; t2[ 48 ]= 1278 ;
t1[ 49 ]= 1229 ; t2[ 49 ]= 1230 ;
t1[ 50 ]= 1229 ; t2[ 50 ]= 1279 ;
t1[ 51 ]= 1268 ; t2[ 51 ]= 1269 ;
t1[ 52 ]= 1274 ; t2[ 52 ]= 1275 ;
t1[ 53 ]= 1275 ; t2[ 53 ]= 1276 ;
t1[ 54 ]= 1275 ; t2[ 54 ]= 1325 ;
t1[ 55 ]= 1276 ; t2[ 55 ]= 1277 ;
t1[ 56 ]= 1276 ; t2[ 56 ]= 1326 ;
t1[ 57 ]= 1277 ; t2[ 57 ]= 1278 ;
t1[ 58 ]= 1277 ; t2[ 58 ]= 1327 ;
t1[ 59 ]= 1278 ; t2[ 59 ]= 1279 ;
t1[ 60 ]= 1278 ; t2[ 60 ]= 1328 ;
t1[ 61 ]= 1279 ; t2[ 61 ]= 1280 ;
t1[ 62 ]= 1279 ; t2[ 62 ]= 1329 ;
t1[ 63 ]= 1324 ; t2[ 63 ]= 1325 ;
t1[ 64 ]= 1324 ; t2[ 64 ]= 1374 ;
t1[ 65 ]= 1325 ; t2[ 65 ]= 1326 ;
t1[ 66 ]= 1325 ; t2[ 66 ]= 1375 ;
t1[ 67 ]= 1327 ; t2[ 67 ]= 1328 ;
t1[ 68 ]= 1327 ; t2[ 68 ]= 1377 ;
t1[ 69 ]= 1328 ; t2[ 69 ]= 1378 ;
t1[ 70 ]= 1329 ; t2[ 70 ]= 1330 ;
t1[ 71 ]= 1329 ; t2[ 71 ]= 1379 ;
t1[ 72 ]= 1374 ; t2[ 72 ]= 1424 ;
t1[ 73 ]= 1375 ; t2[ 73 ]= 1376 ;
t1[ 74 ]= 1375 ; t2[ 74 ]= 1425 ;
t1[ 75 ]= 1377 ; t2[ 75 ]= 1378 ;
t1[ 76 ]= 1378 ; t2[ 76 ]= 1379 ;
t1[ 77 ]= 1378 ; t2[ 77 ]= 1428 ;
t1[ 78 ]= 1415 ; t2[ 78 ]= 1416 ;
t1[ 79 ]= 1415 ; t2[ 79 ]= 1465 ;
t1[ 80 ]= 1420 ; t2[ 80 ]= 1421 ;
t1[ 81 ]= 1421 ; t2[ 81 ]= 1422 ;
t1[ 82 ]= 1422 ; t2[ 82 ]= 1423 ;
t1[ 83 ]= 1423 ; t2[ 83 ]= 1424 ;
t1[ 84 ]= 1424 ; t2[ 84 ]= 1425 ;
t1[ 85 ]= 1425 ; t2[ 85 ]= 1426 ;
t1[ 86 ]= 1425 ; t2[ 86 ]= 1475 ;
t1[ 87 ]= 1426 ; t2[ 87 ]= 1427 ;
t1[ 88 ]= 1432 ; t2[ 88 ]= 1482 ;
t1[ 89 ]= 1475 ; t2[ 89 ]= 1525 ;
t1[ 90 ]= 1482 ; t2[ 90 ]= 1483 ;
t1[ 91 ]= 1524 ; t2[ 91 ]= 1525 ;
t1[ 92 ]= 1524 ; t2[ 92 ]= 1574 ;
t1[ 93 ]= 1525 ; t2[ 93 ]= 1526 ;
t1[ 94 ]= 1529 ; t2[ 94 ]= 1530 ;
t1[ 95 ]= 1529 ; t2[ 95 ]= 1579 ;
t1[ 96 ]= 1531 ; t2[ 96 ]= 1532 ;
t1[ 97 ]= 1567 ; t2[ 97 ]= 1568 ;
t1[ 98 ]= 1580 ; t2[ 98 ]= 1630 ;
t1[ 99 ]= 1841 ; t2[ 99 ]= 1992 ;
t1[ 100 ]= 1892 ; t2[ 100 ]= 1992 ;
t1[ 101 ]= 1940 ; t2[ 101 ]= 1990 ;
t1[ 102 ]= 1942 ; t2[ 102 ]= 1992 ;

var len=t1.length;

for (var i=0;i<103;i++)
{

	var x1=t1[i]%50;
	var y1=t1[i]/50;
	var x2=t2[i]%50;
	var y2=t2[i]/50;
	
	//window.alert(x1);
	
	rectangles[x1][y1] = new BMap.Polygon([
		new BMap.Point(pStart.lng+0.01*x1,pStart.lat+0.01*y1),
		new BMap.Point(pStart.lng+0.01*x1+0.01,pStart.lat+0.01*y1),
		new BMap.Point(pStart.lng+0.01*x1+0.01,pStart.lat+0.01*y1+0.01),
		new BMap.Point(pStart.lng+0.01*x1,pStart.lat+0.01*y1+0.01)
	], {strokeColor:"blue", strokeWeight:1, strokeOpacity:0.9});  //创建矩形
	rectangles[x1][y1].setFillColor("blue");
	
	rectangles[x2][y2] = new BMap.Polygon([
		new BMap.Point(pStart.lng+0.01*x2,pStart.lat+0.01*y2),
		new BMap.Point(pStart.lng+0.01*x2+0.01,pStart.lat+0.01*y2),
		new BMap.Point(pStart.lng+0.01*x2+0.01,pStart.lat+0.01*y2+0.01),
		new BMap.Point(pStart.lng+0.01*x2,pStart.lat+0.01*y2+0.01)
	], {strokeColor:"red", strokeWeight:1, strokeOpacity:0.9});  //创建矩形
	rectangles[x2][y2].setFillColor("red");
	
	map.addOverlay(rectangles[x1][y1]);
	map.addOverlay(rectangles[x2][y2]);
	
}

for (var i=0;i<103;i++){
	var x1=t1[i]%50;
	var y1=t1[i]/50;
	var x2=t2[i]%50;
	var y2=t2[i]/50;
	
	var polyline = new BMap.Polyline([
		new BMap.Point(pStart.lng+0.01*x1+0.005,pStart.lat+0.01*y1+0.005),//起始点的经纬度
		new BMap.Point(pStart.lng+0.01*x2+0.005,pStart.lat+0.01*y2+0.005)//终止点的经纬度
	], {strokeColor:"black",//设置颜色
	strokeWeight:2, //宽度
	strokeOpacity:0});//透明度
	map.addOverlay(polyline);	
}

var rectangle = new BMap.Polygon([
	new BMap.Point(pStart.lng,pStart.lat),
	new BMap.Point(pEnd.lng,pStart.lat),
	new BMap.Point(pEnd.lng,pEnd.lat),
	new BMap.Point(pStart.lng,pEnd.lat)
], {strokeColor:"black", strokeWeight:3, strokeOpacity:0.5}); 
rectangle.setFillColor("none");
map.addOverlay(rectangle);

</script>  
</body>  
</html>